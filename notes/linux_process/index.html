<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux Process | Vithurshan SELVARAJAH</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/notes/>Notebook</a></li><li><a href=/categories/>Categories</a></li><li><a href=/projects/>Projects</a></li><li><a href=/index.xml>RSS</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>Linux Process</span></h1><h2 class=date>2024/03/13</h2></div><main><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Process Creation</h2><div id=outline-text-headline-1 class=outline-text-2><p>A process is a running instance of a program, or in other words, representation of a program when executing by the processor.</p><p>A program is a file that contains machine code, which can be understood and executed by a processor. It is obtained from code written in some programming language and undergoes a transformation to become machine code and thus a program.</p><p>Here is an example of code written in C programming language:</p><div class="src src-c"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>  <span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;unistd.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* Display &#39;Hello World&#39; */</span>
</span></span><span style=display:flex><span>    printf(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74> Hello World</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* Wait for 10 secode */</span>
</span></span><span style=display:flex><span>    sleep(<span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  }</span></span></code></pre></div></div><p>Save this code into a file named <code class=verbatim>myFirstCode.c</code> and compile the program using the following command to generate a program:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  gcc -Wall myFirstCode.c -o myFirstCode</span></span></code></pre></div></div><p>Now we can execute the program:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  ./myFirstCode</span></span></code></pre></div></div><p>Once the program is executed, a process is created, and we can check it:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  ps -aef | grep myFirst*</span></span></code></pre></div></div></div></div><div id=outline-container-headline-2 class=outline-2><h2 id=headline-2>Parent/Child Relationship</h2><div id=outline-text-headline-2 class=outline-text-2><p>Every process has a parent process and may or may not have a child process. Let's run the command <code>ps -aef</code> and analyse the result:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>vts        15519    1209  0 11:54 ?        00:00:00 alacritty
</span></span><span style=display:flex><span>vts        15529   15519  0 11:54 pts/0    00:00:00 /usr/bin/bash
</span></span><span style=display:flex><span>root       15992       2  0 11:55 ?        00:00:00 [kworker/1:0-events]
</span></span><span style=display:flex><span>vts        16309   15529  0 11:56 pts/0    00:00:00 ps -aef</span></span></code></pre></div></div><p>In the above output, the second and third columns represent the process and process's parent ID, respectively. When we run the <code class=verbatim>ps</code> program, a process is created with a process ID of 16309 and has parent process with ID 15529, which represents the bash process. The bash process itself has 15519 as its parent, corresponding to my Alacritty terminal from where I executed the command <code>ps -aef</code>.</p><p><em>INFO: Process ID 0 represents the scheduler.</em></p><p>A process can create a child process by calling the <a href=https://www.atomicl.net/notes/concurrent_instruction_execution/>fork()</a> function in the code and subsequently use the <code class=verbatim>exec()</code> function to execute another program.</p><p>The first thing that gets loaded into memory when booting a Linux system is <code class=verbatim>vmlinuz</code>. It is a compressed version of the Linux kernel executable. This will launch <code class=verbatim>init</code> or <code class=verbatim>systemd</code> in modern Linux distributions as the first process. It's worth noting that there are no technical constraints mandating this to be the first process; it is merely conventional.</p><p>When the parent process of a process is terminated, the <code class=verbatim>init</code> or <code class=verbatim>systemd</code> process becomes the new parent of that process. To observe this, create a process, background it, and use the <code>disown</code> <sup class=footnote-reference><a id=footnote-reference-1 href=#footnote-1>1</a></sup> command to prevent the terminal from sending the SIGHUP signal, which would otherwise cause the process to stop:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  ./myFirstCode &amp;
</span></span><span style=display:flex><span>  disown</span></span></code></pre></div></div><p>If we examine the process tree using the command <code>pstree -s -p 24166</code>, where <code class=verbatim>24166</code> is the process ID of the <code class=verbatim>myFirstCode</code> process obtained using the command <code>pgrep myFirstCode</code>, we will obtain the following:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>systemd(1)───login(780)───bash(837)───startx(1051)───xinit(1066)───i3(1082)───alacritty(11261)───bash(11271)───myFirstCode(24166)</span></span></code></pre></div></div><p>If I close my Alacritty terminal, which is the parent process of myFirstCode, the latter will be owned by the <code class=verbatim>systemd</code> process. Here is the output of the pstree command from another terminal after closing the earlier terminal:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>  systemd(1)───myFirstCode(24166)</span></span></code></pre></div></div></div></div><div id=outline-container-headline-3 class=outline-2><h2 id=headline-3>Footnotes</h2></div><div class=footnotes><hr class=footnotes-separatator><div class=footnote-definitions><div class=footnote-definition><sup id=footnote-1><a href=#footnote-reference-1>1</a></sup><div class=footnote-body><p>The command is part of bash or ksh93 shell.</p></div></div></div></div></main><footer><hr>© <a href=https://www.atomicl.net>Vithurshan SELVARAJAH</a> 2022 &ndash; 2025 | <a href=https://github.com/BlackcatRs>Github</a> | <a href=https://www.linkedin.com/in/vithurshan-selvarajah/>LinkedIn</a></footer></body></html>