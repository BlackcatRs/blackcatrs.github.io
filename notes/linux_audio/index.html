<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux Audio | Vithurshan SELVARAJAH</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/notes/>Notebook</a></li><li><a href=/categories/>Categories</a></li><li><a href=/projects/>Projects</a></li><li><a href=/index.xml>RSS</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>Linux Audio</span></h1><h2 class=date>2024/02/18</h2></div><main><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Sound</h2><div id=outline-text-headline-1 class=outline-text-2><p>The Arch sound system is organized into different layers:</p><ol><li>Drivers and interface – Hardware support and control, providing device drivers for audio hardware.</li><li>Usermode API (libraries) – Applications interact with this layer using libraries that offer a way to access sound-related functions.</li><li>Usermode sound servers (optional) – These servers, if used, enhance audio capabilities, especially in complex desktops with multiple simultaneous audio applications.</li><li>Sound frameworks (optional) – Optional frameworks offer a more abstract interface for developers working on audio-related applications, without relying on server processes.</li></ol><p>A default Arch installation already includes the kernel sound system (ALSA). ALSA — The default Linux kernel component providing device drivers and lowest-level support for audio hardware.
Which means it allow to read and write from audio devices/sound cards.</p><p><code class=verbatim>amixer</code> - command-line mixer for ALSA soundcard driver.</p><p>Source: <a href=https://wiki.archlinux.org/title/sound_system>https://wiki.archlinux.org/title/sound_system</a></p><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>PulseAudio</h3><div id=outline-text-headline-2 class=outline-text-3><p>Certain applications have the capability to directly record from or output to ALSA audio devices, such as sound cards or microphones. However, this can pose issues because some audio devices don't support multiplexing, preventing multiple programs from using the device simultaneously. On the other hand, devices with hardware mixing can handle multiple audio streams concurrently, mixing them into a single output and send to devices like speakers.</p><p>To address multiplexing and other limitations, sound servers are created. One such example is <code class=verbatim>PulseAudio</code>, which serves as an abstracted layer above ALSA. PulseAudio acts as a server, taking audio from programs considered as clients, delivering it to ALSA (driver), and from there to the sound card.</p><p>Another noteworthy sound server is <code class=verbatim>Jack</code>, designed for professional use. Jack functions as a sound server daemon, providing real-time, low-latency connections for both audio and MIDI data between applications following its API.</p><p><em>Note: Some confusion may occur between ALSA and PulseAudio. ALSA includes a Linux kernel component with sound card drivers, as well as a userspace component, <code class=verbatim>libasound</code>. PulseAudio builds only on the kernel component, but offers compatibility with libasound through <code class=verbatim>pulseaudio-alsa</code>.</em></p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  sudo pacman -S pulseaudio pulseaudio-bluetooth</span></span></code></pre></div></div><ul><li><code class=verbatim>pulseaudio-alsa</code> for PulseAudio to manage ALSA as well, see <a href=https://wiki.archlinux.org/title/PulseAudio#ALSA>ALSA</a>.</li><li><code class=verbatim>pulseaudio-bluetooth</code> for bluetooth support (Bluez), see <a href=https://wiki.archlinux.org/title/Bluetooth_headset>bluetooth headset</a> page.</li></ul><p>The <code class=verbatim>pactl</code> command can control the running PulseAudio sound server, offering only a subset of operations; for the complete set, use <code class=verbatim>pacmd</code></p><p>Various front-ends, including <code class=verbatim>pamixer</code> for console-based volume control and <code class=verbatim>pavucontrol</code> for graphical interface, are available for controlling the PulseAudio daemon on Arch Linux.</p><p>Source : <a href=https://wiki.archlinux.org/title/PulseAudio>https://wiki.archlinux.org/title/PulseAudio</a></p></div></div><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>PipeWire</h3><div id=outline-text-headline-3 class=outline-text-3><p>PipeWire is introduced as a replacement for both PulseAudio and JACK, aiming to provide minimal-latency capture and playback for both audio and video. It is a audio and video server that support PulseAudio, JACK, ALSA and GStreamer-based applications, offering a versatile solution for a wide range of audio and video requirements.</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  sudo pacman -S pipewire</span></span></code></pre></div></div><ul><li>Install <code class=verbatim>lib32-pipewire</code> <sup class=footnote-reference><a id=footnote-reference-1 href=#footnote-1>1</a></sup> for multilib support.</li></ul><p>Like JACK, PipeWire implements no connection logic internally. The burden of watching for new streams and connect them to the appropriate output device or application is left to an external component known as a session manager:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  sudo pacman -S wireplumber</span></span></code></pre></div></div><p>To use PipeWire as an audio server, install the following packages:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  sudo pacman -S pipewire-alsa pipewire-pulse pipewire-jack</span></span></code></pre></div></div><ul><li><code class=verbatim>pipewire-alsa</code> (and remove <code class=verbatim>pulseaudio-alsa</code> if it was installed) routes all applications using the ALSA API through PipeWire.</li><li><code class=verbatim>pipewire-pulse</code> replaces the <code class=verbatim>pulseaudio</code> and <code class=verbatim>pulseaudio-bluetooth</code>. Reboot, re-login or stop <code class=verbatim>pulseaudio.service</code> and start the <code class=verbatim>pipewire-pulse.service</code> user unit to see the effect.
<em>To check the good fuction of the service run the command <code>pactl info</code> and check for string "Server Name: PulseAudio (on PipeWire x.y.z)" in the output.</em></li><li>The <code class=verbatim>pipewire-jack</code> for JACK support.
<em>There is also <code class=verbatim>lib32-pipewire-jack</code> for multilib support.</em></li></ul><div id=outline-container-headline-4 class=outline-4><h4 id=headline-4>Bluetooth devices</h4><div id=outline-text-headline-4 class=outline-text-4><p>PipeWire can also handle Bluetooth audio devices by installing the <code class=verbatim>pipewire-audio</code> package:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  sudo pacman -S pipewire-audio</span></span></code></pre></div></div></div></div><div id=outline-container-headline-5 class=outline-4><h4 id=headline-5>Patchbay</h4><div id=outline-text-headline-5 class=outline-text-4><p>To redirect an audio stream to an audio device or application using PipeWire, you can install the <code class=verbatim>pipewire-pulse</code> package, which includes the patchbay audio functionality:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  sudo pacman -S qpwgraph</span></span></code></pre></div></div></div></div><div id=outline-container-headline-6 class=outline-4><h4 id=headline-6>References</h4><div id=outline-text-headline-6 class=outline-text-4><ul><li><a href=https://wiki.archlinux.org/title/PipeWire>PipeWire</a></li></ul></div></div></div></div></div></div><div id=outline-container-headline-7 class=outline-2><h2 id=headline-7>Footnotes</h2></div><div class=footnotes><hr class=footnotes-separatator><div class=footnote-definitions><div class=footnote-definition><sup id=footnote-1><a href=#footnote-reference-1>1</a></sup><div class=footnote-body><p>Enable the multilib repository in pacman.conf to install 32-bit binaries.</p></div></div></div></div></main><footer><hr>© <a href=https://www.atomicl.net>Vithurshan SELVARAJAH</a> 2022 &ndash; 2025 | <a href=https://github.com/BlackcatRs>Github</a> | <a href=https://www.linkedin.com/in/vithurshan-selvarajah/>LinkedIn</a></footer></body></html>