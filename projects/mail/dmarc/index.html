<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>DMARC | Vithurshan SELVARAJAH</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/fonts/css/all.min.css><link rel=stylesheet href=/css/header-num.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/notes/>Notebook</a></li><li><a href=/categories/>Categories</a></li><li><a href=/projects/>Projects</a></li><li><a href=/index.xml>RSS</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>DMARC</span></h1><div class=post-meta><span> Published on 16 Feb 2025</span>
<span class=seperator>.</span>
<span> Filed in <a href=/projects>Projects</a></span>
<span class=seperator>.</span>
<span> 306 words</span></div></div><main><p>DMARC stands for Domain-based message authentication, reporting and conformance. DMARC is not a product but it is a freely available technical specification. DMARC tells the recipeient's SMTP server to allow, reject or quarantine when SPF and DKIM verification is not valid.</p><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Create DMARC Record</h2><div id=outline-text-headline-1 class=outline-text-2><p>Go to your DNS manager and add a TXT record. In the name field, enter <code class=verbatim>_dmarc</code>. In the value field, enter the following:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>v=DMARC1; p=none; pct=100; rua=mailto:dmarc-reports@example1.com</span></span></code></pre></div></div><ul><li><code class=verbatim>v=DMARC1</code>: The protocol version is DMARC1.</li><li><code class=verbatim>p=none</code>: We choose none as the <code class=verbatim>policy</code> for our domain.</li><li><code class=verbatim>pct=100</code>: The percentage of emails from your domain DMARC applies to.</li><li><code class=verbatim>rua</code> Stands for reporting URI for aggregate report. The email address is used to tell receiving email servers where report should be sent.</li></ul><p><strong>CAREFUL: Replace dmarc-reports@example1.com with your real email address that is used to receive aggregate DMARC report.</strong></p><p>There are 3 policies you can choose from:</p><ul><li><code class=verbatim>none</code>: Tells receiving email servers not to do anything special if DMARC check fails.</li><li><code class=verbatim>quarantine</code>: Tells receiving email server to put the email into quarantine if DMARC check fails. It must be approved by an admin before it can reach the recipient’s inbox.</li><li><code class=verbatim>reject</code>: Tells receiving email servers to reject the email if DMARC check fails.</li></ul><p>There’s another tag that you can add to the DMARC record: <code class=verbatim>fo</code>. It has four possible values:</p><ul><li><code class=verbatim>0</code> (default): Generate reports if <strong>all</strong> underlying authentication mechanisms fail to produce a DMARC pass result.</li><li><code class=verbatim>1</code>: Generate reports if <strong>any</strong> mechanisms fail.</li><li><code class=verbatim>d</code>: Generate a report if DKIM signature failed verification.</li><li><code class=verbatim>s</code>: Generate a report if SPF failed.</li></ul><p>For example, you can set <code class=verbatim>fo:1</code> to receive a report if any mechanism fails:</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>v=DMARC1; p=none; pct=100; fo=1; rua=mailto:dmarck-reports@example1.com</span></span></code></pre></div></div><p>Once the DMARC record is added, test it by querying the DNS server:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  dig txt +short _dmarc.example1.com</span></span></code></pre></div></div><p>Or by using the <code class=verbatim>opendmarc</code> utility which will produce formatted text:</p><div class="src src-shell"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>  opendmarc-check example1.com</span></span></code></pre></div></div></div></div></main><footer><hr>© <a href=https:www.atomicl.net>Vithurshan SELVARAJAH</a> 2022 – 2025 | <a href=https://github.com/BlackcatRs>Github</a> | <a href=https://www.linkedin.com/in/vithurshan-selvarajah/>LinkedIn</a></footer></body></html>